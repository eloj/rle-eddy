#
# RLE compression/decompression test suite
#
# Tips:
#  * You can change a length or hash to something invalid to get a hexdump of the data to inspect.
#  * Inserting a line with '---' will stop testing at that point.
#  * A '-' after the action force-disables roundtrip (re-(de)compressing output) checking.
#
# variant c|d "input"|@input expected-size expected-hash
goldbox c "" 0 0
# Encoded as REP 1 A <ff 41>
goldbox c "A" 2 0xe192cdee
goldbox c "AA" 2 0xf2305599
# Encoder quirk: break CPY to encode last character as REP 1 B (<00 41 ff 42> instead of <01 41 42>)
goldbox c "AB" 4 0x29e010a8
goldbox c "ABB" 4 0x3a4288df
goldbox c "AABB" 4 0xcf04ca25
goldbox c "ABBBB" 4 0x1d07b831
goldbox c "BBBBA" 4 0x9abf4254
goldbox c "AAAAAAAAAAAAAAAA" 2 0x06ebc713
goldbox c "ABCDEFGHIJKLMNOP" 18 0xfd007eb6
goldbox c @tests/R126A 2 0x9ef7237a
goldbox c @tests/R127A 2 0xaa108be3
goldbox c @tests/R128A 4 0xb55580db
goldbox c @tests/R129A 4 0xa6f718ac
goldbox c @tests/C126 128 0x4dbdcb4c
# Encoder will not use CPY 127:
goldbox c @tests/C127 129 0x8cb9ae3f
# ... nor CPY 128:
goldbox c @tests/C128 131 0x40283534
goldbox c @tests/C129 132 0x0cfd0f30
goldbox d @tests/goldbox/R126A.rle 126 0x694432e3
goldbox d @tests/goldbox/R127A.rle 127 0x1164d232
goldbox d @tests/goldbox/R128A.rle 128 0x30a4907a
goldbox d @tests/goldbox/por-title.rle 32017 0x23e299b1
goldbox d @tests/goldbox/por-item6-57.rle 63 0xc7294001

packbits c "A" 2 0x4271e96d
packbits c "AA" 2 0xe192cdee
packbits c "AB" 3 0x89d0023c
packbits c "ABB" 4 0x29e010a8
packbits c "AABB" 4 0x01e3f8ea
packbits c "ABBBB" 4 0x0ea52046
packbits c "BBBBA" 4 0xe419cc6f
packbits c "AAAAAAAAAAAAAAAA" 2 0x15495f64
packbits c "ABCDEFGHIJKLMNOP" 17 0xa81a0e90

packbits c @tests/R126A 2 0x8d55bb0d
packbits c @tests/R127A 2 0x9ef7237a
packbits c @tests/R128A 2 0xaa108be3
packbits c @tests/R129A 4 0x16b6a458
packbits c @tests/C126 127 0xed57b1f6
packbits c @tests/C127 128 0x8ef84124
packbits c @tests/C128 129 0x6560f52f
packbits c @tests/C129 131 0x1c1c1e9b

packbits c @tests/R128A_C128 131 0x168a88e0
packbits c @tests/R128A_C128_R128A 133 0xd9602121
packbits c @tests/R128A_C129 133 0x310143af
packbits c @tests/packbits/tn1023 15 0x8b25afe0
packbits d @tests/packbits/tn1023.rle 24 0xef6fc26a
packbits d @tests/packbits/R128A.rle 128 0x30a4907a
packbits d @tests/packbits/R128A_C128_R128A.rle 384 0xcf8b3f17
packbits d- "\x80\xFFA\x80\x80" 2 0xaec4b71e

pcx c "A" 1 0xe16dcdee
pcx c "AA" 2 0x61e0e57e
pcx c "AB" 2 0xbd9444ea
# Encoder's choice as to encode ABB as LIT 1 REP 2, or LIT 3
pcx c "ABB" 3 0x8191d085
pcx c "AABB" 4 0xeff38d61
pcx c "ABBBB" 3 0xe85e81b7
pcx c "BBBBA" 3 0xd9ba98af
pcx c "AAAAAAAAAAAAAAAA" 2 0x79602411
pcx c "ABCDEFGHIJKLMNOP" 16 0x5e2b5be5

pcx c "\xFF" 2 0x4b6a8009
pcx c "A\xC0B" 4 0x73138aca

pcx c @tests/R126A 4 0x12b30b1e
pcx c @tests/R127A 5 0x5d5906ad
pcx c @tests/R128_FF 6 0x7113a0bd

# REP 0 can be used to hide things from the decoder. Roundtrip check disabled.
pcx d- "\xC0s\xC0e\xC0c\xC0r\xC0e\xC0tmessage" 7 0x98a214d0

## Invalid input examples:
## REP 2 at end
goldbox d "\xfe" -2
packbits d "\xff" -2
pcx d "\xc2" -2
## CPY 2 at end
goldbox d "\x01" -2
packbits d "\x01" -2
